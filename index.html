<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUKUNA X MASTER - V3.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Cairo:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f3ff; --magenta: #ff00ff; --dark: #050505; }
        body { margin: 0; background: var(--dark); color: white; font-family: 'Cairo', sans-serif; overflow: hidden; }
        #particles-js { position: absolute; width: 100%; height: 100%; background-color: var(--dark); z-index: 1; }
        .hero { position: relative; z-index: 2; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .app-card { background: rgba(255, 255, 255, 0.02); padding: 30px; border-radius: 25px; border: 1px solid rgba(0, 243, 255, 0.2); backdrop-filter: blur(15px); width: 85%; max-width: 380px; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,0.7); }
        .logo { width: 110px; height: 110px; border-radius: 50%; border: 2px solid var(--neon); box-shadow: 0 0 15px var(--neon); margin-bottom: 15px; cursor: pointer; transition: transform 0.3s; }
        h1 { font-family: 'Orbitron', sans-serif; font-size: 1.6rem; color: var(--neon); text-shadow: 0 0 10px var(--neon); margin: 10px 0; }
        .btn-grid { display: grid; gap: 12px; margin-top: 20px; }
        .g-btn { background: linear-gradient(45deg, #111, #1a1a1a); border: 1px solid var(--neon); color: white; padding: 14px; border-radius: 10px; font-weight: 900; cursor: pointer; transition: 0.3s; font-size: 0.95rem; }
        .g-btn:disabled { border-color: #333; color: #555; cursor: not-allowed; opacity: 0.5; }
        .g-btn:not(:disabled):hover { background: var(--neon); color: black; box-shadow: 0 0 15px var(--neon); }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ù…Ø·ÙˆØ±Ø© */
        #adminPanel { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 100; display: none; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon); padding-bottom: 10px; margin-bottom: 20px; }
        .player-list { background: rgba(255,255,255,0.05); border-radius: 10px; padding: 10px; max-height: 300px; overflow-y: auto; margin-top: 20px; }
        .player-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #222; font-size: 0.9rem; }
        .del-btn { background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        .control-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #222; }
    </style>
</head>
<body>

<div id="particles-js"></div>

<div class="hero">
    <div class="app-card">
        <img src="abc.jpg" class="logo" onclick="checkAdmin()" alt="Logo">
        <h1>SUKUNA MASTER</h1>
        <p style="font-size: 0.75rem; color: #666;">PREMIUM GAMING PANEL</p>
        <div class="btn-grid">
            <button class="g-btn" id="btn_reg" onclick="action('reg')">ğŸ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</button>
            <button class="g-btn" id="btn_script" onclick="action('script')">âš¡ Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù‡ÙŠØ¯Ø´ÙˆØª</button>
            <button class="g-btn" id="btn_clan" onclick="action('clan')">ğŸ‘¥ Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙƒÙ„Ø§Ù†</button>
        </div>
    </div>
</div>

<div id="adminPanel">
    <div class="admin-header">
        <h2 style="color: var(--neon); font-family: 'Orbitron'; margin: 0;">MASTER ADMIN</h2>
        <button onclick="closeAdmin()" style="background:none; border:1px solid red; color:red; padding:5px 15px; border-radius:5px;">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div class="control-row">
        <span>Ù‚ÙÙ„/ÙØªØ­ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</span>
        <button id="toggleReg" onclick="toggleBtn('btn_reg')">ØªØ­Ù…ÙŠÙ„...</button>
    </div>

    <h3 style="color: var(--magenta); margin-top: 30px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† (<span id="count">0</span>):</h3>
    <div class="player-list" id="playerList">
        <p style="text-align:center; color:#666;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†...</p>
    </div>

    <button onclick="clearAllPlayers()" style="width:100%; margin-top:20px; padding:15px; background:#444; color:white; border:none; border-radius:10px;">ØªØµÙÙŠØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ âš ï¸</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue, set, get, push, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = { databaseURL: "https://project-fe025bb5-b1cc-4b8f-93e-default-rtdb.firebaseio.com" };
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // 1. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø²Ø±Ø§ÙŠØ± ÙˆØ¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
    onValue(ref(db, 'settings/btn_reg'), (snap) => {
        const status = snap.val();
        document.getElementById('btn_reg').disabled = (status === "off");
        document.getElementById('btn_reg').innerText = status === "off" ? "âŒ Ù…ØªÙˆÙ‚Ù" : "ğŸ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©";
        document.getElementById('toggleReg').innerText = status === "off" ? "ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¢Ù†" : "Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¢Ù†";
    });

    // 2. Ø¹Ø±Ø¶ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ù„Ù„Ø£Ø¯Ù…Ù†
    onValue(ref(db, 'players'), (snapshot) => {
        const listDiv = document.getElementById('playerList');
        const countSpan = document.getElementById('count');
        listDiv.innerHTML = "";
        let count = 0;

        if (snapshot.exists()) {
            snapshot.forEach((child) => {
                count++;
                const p = child.val();
                listDiv.innerHTML += `
                    <div class="player-item">
                        <span>ID: <b>${p.id}</b></span>
                        <button class="del-btn" onclick="deletePlayer('${child.key}')">Ø­Ø°Ù</button>
                    </div>
                `;
            });
            countSpan.innerText = count;
        } else {
            listDiv.innerHTML = '<p style="text-align:center; color:#666;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯.</p>';
            countSpan.innerText = "0";
        }
    });

    // 3. ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø¯Ù…Ù† (Ø§Ù„Ø­Ø°Ù)
    window.deletePlayer = (key) => {
        if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù„Ø§Ø¹Ø¨ØŸ")) remove(ref(db, 'players/' + key));
    };

    window.clearAllPlayers = () => {
        if(confirm("ØªØ­Ø°ÙŠØ±: Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) remove(ref(db, 'players'));
    };

    window.toggleBtn = async (id) => {
        const snap = await get(ref(db, 'settings/' + id));
        set(ref(db, 'settings/' + id), snap.val() === "off" ? "on" : "off");
    };

    // 4. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆÙ…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
    window.action = async (type) => {
        if (type === 'reg') {
            if (localStorage.getItem('user_registered')) return alert("Ø³Ø¬Ù„Øª Ù‚Ø¨Ù„ ÙƒØ¯Ø© ÙŠØ§ ÙˆØ­Ø´!");
            const playerId = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:");
            if (!playerId || playerId.length < 5) return alert("ID ØºÙŠØ± ØµØ§Ù„Ø­!");

            const snap = await get(ref(db, 'players'));
            let exists = false;
            if(snap.exists()){
                snap.forEach(c => { if(c.val().id === playerId) exists = true; });
            }
            if(exists) return alert("Ø§Ù„Ù€ ID Ø¯Ù‡ Ù…Ø³Ø¬Ù„ ÙØ¹Ù„Ø§Ù‹!");

            push(ref(db, 'players'), { id: playerId, time: new Date().toLocaleTimeString() })
            .then(() => {
                localStorage.setItem('user_registered', 'true');
                alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
            });
        } else { alert("ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„!"); }
    };

    // 5. Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠ (5 Ø¶ØºØ·Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆØ¬Ùˆ)
    let logoClicks = 0;
    window.checkAdmin = () => {
        logoClicks++;
        if(logoClicks >= 5) {
            if(prompt("Ø±Ù…Ø² Ø§Ù„Ø³Ø±:") === "cheats777") document.getElementById('adminPanel').style.display = 'block';
            logoClicks = 0;
        }
    };
    window.closeAdmin = () => document.getElementById('adminPanel').style.display = 'none';

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª (Particles)
    particlesJS('particles-js', { "particles": { "number": { "value": 60 }, "color": { "value": "#00f3ff" }, "line_linked": { "enable": true, "color": "#ff00ff" }, "move": { "speed": 4 } } });
</script>
</body>
</html>
