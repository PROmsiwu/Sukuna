<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUKUNA X MASTER - V2.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Cairo:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f3ff; --magenta: #ff00ff; --dark: #050505; }
        body {
            margin: 0; background: var(--dark); color: white;
            font-family: 'Cairo', sans-serif; overflow: hidden;
        }
        /* Ø®Ù„ÙÙŠØ© Ø¬ÙŠÙ…Ù†Ø¬ Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        .hero {
            height: 100vh; display: flex; flex-direction: column; align-items: center;
            justify-content: center; background: radial-gradient(circle, #0f172a 0%, #050505 100%);
        }
        .app-card {
            background: rgba(255, 255, 255, 0.02); padding: 30px; border-radius: 25px;
            border: 1px solid rgba(0, 243, 255, 0.2); backdrop-filter: blur(15px);
            width: 85%; max-width: 380px; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,0.7);
        }
        .logo {
            width: 110px; height: 110px; border-radius: 50%; border: 2px solid var(--neon);
            box-shadow: 0 0 15px var(--neon); margin-bottom: 15px; cursor: pointer;
            transition: transform 0.3s;
        }
        .logo:active { transform: scale(0.9); }
        h1 { font-family: 'Orbitron', sans-serif; font-size: 1.6rem; color: var(--neon); text-shadow: 0 0 10px var(--neon); margin: 10px 0; }
        
        /* Ø§Ù„Ø²Ø±Ø§ÙŠØ± Ø§Ù„Ø¬ÙŠÙ…Ù†Ø¬ */
        .btn-grid { display: grid; gap: 12px; margin-top: 20px; }
        .g-btn {
            background: linear-gradient(45deg, #111, #1a1a1a);
            border: 1px solid var(--neon); color: white; padding: 14px;
            border-radius: 10px; font-weight: 900; cursor: pointer;
            transition: 0.3s; font-size: 0.95rem;
        }
        .g-btn:disabled { border-color: #333; color: #555; cursor: not-allowed; opacity: 0.5; }
        .g-btn:not(:disabled):hover { background: var(--neon); color: black; box-shadow: 0 0 15px var(--neon); }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† */
        #adminPanel {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 100; display: none; padding: 30px; box-sizing: border-box;
        }
        .admin-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #222; }
        .close-admin { margin-top: 30px; background: red; color: white; border: none; padding: 12px; border-radius: 8px; width: 100%; font-weight: bold; }
    </style>
</head>
<body>

<div class="hero">
    <div class="app-card">
        <img src="abc.jpg" class="logo" onclick="checkAdmin()" alt="Logo">
        <h1>SUKUNA MASTER</h1>
        <p style="font-size: 0.75rem; color: #666; letter-spacing: 1px;">PREMIUM GAMING PANEL</p>
        
        <div class="btn-grid">
            <button class="g-btn" id="btn_reg" onclick="action('reg')">ğŸ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©</button>
            <button class="g-btn" id="btn_script" onclick="action('script')">âš¡ Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù‡ÙŠØ¯Ø´ÙˆØª</button>
            <button class="g-btn" id="btn_clan" onclick="action('clan')">ğŸ‘¥ Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙƒÙ„Ø§Ù†</button>
        </div>
    </div>
</div>

<div id="adminPanel">
    <h2 style="color: var(--neon); font-family: 'Orbitron';">ADMIN CONTROL</h2>
    <div class="admin-row">
        <span>Ø²Ø± Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©:</span>
        <button onclick="toggleBtn('btn_reg')">ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©</button>
    </div>
    <div class="admin-row">
        <span>Ø²Ø± Ø§Ù„Ø³ÙƒØ±Ø¨Øª:</span>
        <button onclick="toggleBtn('btn_script')">ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©</button>
    </div>
    <button class="close-admin" onclick="closeAdmin()">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù„ÙˆØ­Ø©</button>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue, set, get, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙØ§ÙŠØ±Ø¨ÙŠØ³ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
    const firebaseConfig = {
        databaseURL: "https://project-fe025bb5-b1cc-4b8f-93e-default-rtdb.firebaseio.com",
    };
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // 1. Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø²Ø±Ø§ÙŠØ± Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù† (ØªØ­Ø¯ÙŠØ« Ù„Ø­Ø¸ÙŠ)
    const btns = ['btn_reg', 'btn_script', 'btn_clan'];
    btns.forEach(id => {
        onValue(ref(db, 'settings/' + id), (snapshot) => {
            const status = snapshot.val();
            const btnEl = document.getElementById(id);
            if (status === "off") {
                btnEl.disabled = true;
                btnEl.dataset.oldText = btnEl.innerText;
                btnEl.innerText = "âŒ Ù…ØªÙˆÙ‚Ù";
            } else {
                btnEl.disabled = false;
                if(id === 'btn_reg') btnEl.innerText = "ğŸ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©";
                if(id === 'btn_script') btnEl.innerText = "âš¡ Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù‡ÙŠØ¯Ø´ÙˆØª";
                if(id === 'btn_clan') btnEl.innerText = "ğŸ‘¥ Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙƒÙ„Ø§Ù†";
            }
        });
    });

    // 2. ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø¹ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙƒØ±Ø§Ø±
    window.action = async (type) => {
        const sound = new Audio('https://www.soundjay.com/buttons/sounds/button-16.mp3');
        
        if (type === 'reg') {
            // ÙØ­Øµ Ù…Ø­Ù„ÙŠ (Ù‡Ù„ Ø³Ø¬Ù„ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ØŸ)
            if (localStorage.getItem('user_registered')) {
                alert("Ø¹Ø°Ø±Ø§Ù‹ ÙŠØ§ Ø¨Ø·Ù„! Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø².");
                return;
            }

            const playerId = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù„Ù„ØªØ­Ù‚Ù‚:");
            if (!playerId || playerId.length < 5) {
                alert("Ø§Ù„Ù€ ID ØºÙŠØ± ØµØ­ÙŠØ­!");
                return;
            }

            // ÙØ­Øµ Ø§Ù„Ø³ÙŠØ±ÙØ± (Ù‡Ù„ Ø§Ù„Ù€ ID Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©ØŸ)
            const playersRef = ref(db, 'players');
            const snapshot = await get(playersRef);
            let idExists = false;
            
            snapshot.forEach((child) => {
                if (child.val().id === playerId) idExists = true;
            });

            if (idExists) {
                alert("Ù‡Ø°Ø§ Ø§Ù„Ù€ ID Ù…Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø© Ø¨Ø§Ù„ÙØ¹Ù„!");
                return;
            }

            // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙƒÙ„ Ø´ÙŠØ¡ ØªÙ…Ø§Ù….. Ø³Ø¬Ù„ Ø§Ù„Ù„Ø§Ø¹Ø¨
            push(ref(db, 'players'), {
                id: playerId,
                date: new Date().toLocaleString()
            }).then(() => {
                sound.play();
                localStorage.setItem('user_registered', 'true');
                alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ù†Ø±Ø§ÙƒÙ… ÙÙŠ Ø§Ù„Ø³Ø§Ø­Ø©.");
            });
        } else {
            sound.play();
            alert("ØªÙ… ØªÙØ¹ÙŠÙ„ " + type + " Ø¨Ù†Ø¬Ø§Ø­!");
        }
    };

    // 3. Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø³Ø±ÙŠ
    let logoClicks = 0;
    window.checkAdmin = () => {
        logoClicks++;
        if(logoClicks >= 5) {
            let p = prompt("Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠ:");
            if(p === "cheats777") {
                document.getElementById('adminPanel').style.display = 'block';
            }
            logoClicks = 0;
        }
    };

    window.closeAdmin = () => document.getElementById('adminPanel').style.display = 'none';

    window.toggleBtn = async (id) => {
        const dbRef = ref(db, 'settings/' + id);
        const snap = await get(dbRef);
        const current = snap.val();
        set(dbRef, current === "off" ? "on" : "off");
    };
</script>
</body>
</html>
